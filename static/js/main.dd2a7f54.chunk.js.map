{"version":3,"sources":["kelp.png","favicon.ico","components/Business/Business.js","components/BusinessList/BusinessList.js","components/SearchBar/SearchBar.js","util/Yelp.js","components/Map/Map.js","components/Loader/Loader.js","components/App/App.js","serviceWorker.js","components/redux/store.js","index.js"],"names":["module","exports","Business","business","clickOnBusiness","id","className","src","imageSrc","defaultImage","alt","coordinates","longitude","latitude","onClick","e","target","split","href","url","rel","name","address","city","state","zipCode","category","toUpperCase","rating","reviewCount","BusinessList","props","loadedBusinesses","businesses","map","push","style","key","SearchBar","useState","term","setTerm","location","setLocation","sortBy","setSortBy","sortByOptions","getSortByClass","sortByOption","handleSearch","searchYelp","warningContainer","document","createElement","warning","belowSubmitButton","querySelector","setAttribute","textContent","cssText","append","setTimeout","removeChild","enterSearch","preventDefault","keyCode","Object","keys","sortByOptionValue","console","log","handleSortByChange","onChange","value","placeholder","onKeyUp","Yelp","search","a","fetch","headers","Authorization","process","response","json","jsonResponse","image_url","address1","zip_code","categories","title","review_count","Map","clickedBusiness","mapOpen","setMapView","mapLoaded","setMapLoaded","setMap","setStateMarkers","currentMarkers","useRef","dispatch","useDispatch","renderMap","useCallback","index","window","getElementsByTagName","script","parentNode","insertBefore","loadScript","initMap","mapboxgl","accessToken","container","center","zoom","on","resize","updateMarkers","geojson","type","features","geometry","properties","current","forEach","marker","remove","el","currentFeature","myMarker","Marker","setLngLat","setPopup","Popup","offset","setHTML","addTo","flyTo","addEventListener","flyToSpot","payload","useEffect","_lngLat","lng","toFixed","Number","display","buttonStatus","dispatchEvent","Event","Loader","width","height","viewBox","xmlns","fill","strokeWidth","strokeLinecap","cx","cy","r","App","setBusinesses","isLoading","setIsLoading","setMapOpen","setClickedBusiness","windowSmall","setWindowSmall","globalState","useSelector","prevBizDiv","bizToHighlight","getElementById","currentMarker","classList","add","scrollIntoView","block","inline","behavior","viewPortWidth","innerWidth","documentElement","clientWidth","BusinessListWidth","textDecoration","color","kelp","then","length","p","noresults","justifyContent","marginTop","position","alignItems","Boolean","hostname","match","defaultState","currentBiz","currentBusinessStore","createStore","action","ReactDOM","render","store","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"qHAAAA,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,0VCM5B,SAASC,EAAT,GAAsD,IAAlCC,EAAiC,EAAjCA,SAAUC,EAAuB,EAAvBA,gBAAiBC,EAAM,EAANA,GAsC5D,OACI,yBAAKC,UAAU,WAAWD,GAAIA,GAC5B,yBAAKC,UAAU,mBACb,yBAAKC,IAPJJ,EAASK,SAAWL,EAASK,SAAWC,IAOhBC,IAAK,CAACP,EAASQ,YAAYC,UAAWT,EAASQ,YAAYE,UAAWC,QApC9E,SAACC,GAGxBX,EAAgBW,EAAEC,OAAON,IAAIO,MAAM,UAmC/B,uBAAGC,KAAMf,EAASgB,IAAKH,OAAO,SAASI,IAAI,sBAAsBd,UAAU,iBAAgB,4BAAKH,EAASkB,OACzG,yBAAKf,UAAU,wBACb,yBAAKA,UAAU,oBACb,uBAAGY,KAAI,0DAAqDf,EAASmB,QAA9D,YAAyEnB,EAASoB,MAAQP,OAAO,SAASI,IAAI,uBAAsB,2BAAIjB,EAASmB,SACxJ,2BAAInB,EAASoB,MACb,qCAAOpB,EAASqB,MAAhB,YAAyBrB,EAASsB,YAEpC,yBAAKnB,UAAU,oBACZH,EAASuB,SAAW,4BAAKvB,EAASuB,SAASC,eAAsB,KAClE,wBAAIrB,UAAU,UAAd,UAA2BH,EAASyB,OAApC,WACA,qCAAOzB,EAAS0B,YAAhB,gBCxBGC,MA9Bf,SAAuBC,GAGnB,IAAIC,EAAmB,GAGvB,OAFAD,EAAME,WAAWC,KAAI,SAAA/B,GAAQ,OAAI6B,EAAiBG,KAAKhC,MAGnD,yBAAKG,UAAU,eAAe8B,MAAOL,EAAMK,OACtCL,EAAME,WAAWC,KAAI,SAAA/B,GAAQ,OAAI,kBAAC,EAAD,CAAUA,SAAUA,EAAUG,UAAU,MAAMD,GAAIF,EAASE,GAAIgC,IAAKlC,EAASE,GAAID,gBAAiB2B,EAAM3B,uB,MCPvI,SAASkC,EAAUP,GAAQ,IAAD,EACbQ,mBAAS,IADI,mBAC9BC,EAD8B,KACxBC,EADwB,OAELF,mBAAS,IAFJ,mBAE9BG,EAF8B,KAEpBC,EAFoB,OAGTJ,mBAAS,cAHA,mBAG9BK,EAH8B,KAGtBC,EAHsB,KAK/BC,EAAgB,CAClB,aAAc,aACd,gBAAiB,SACjB,gBAAiB,gBAGfC,EAAiB,SAACC,GACpB,OAAOJ,IAAWI,EAAe,SAAW,IAyB1CC,EAAe,WAEjB,GAAKT,GAASE,EAaVX,EAAMmB,WAAWV,EAAME,EAAUE,OAbb,CACpB,IAAIO,EAAmBC,SAASC,cAAc,OAC1CC,EAAUF,SAASC,cAAc,KACjCE,EAAoBH,SAASI,cAAc,qBAC/CL,EAAiBM,aAAa,QAAS,8FACvCH,EAAQI,YAAc,wCACtBJ,EAAQlB,MAAMuB,QAAU,yJACxBR,EAAiBS,OAAON,GACxBC,EAAkBK,OAAOT,GACzBU,YAAW,WACPN,EAAkBO,YAAYX,KAC/B,OAwBLY,EAAc,SAAChD,GACjBA,EAAEiD,iBACgB,KAAdjD,EAAEkD,SACFhB,KAKR,OACI,yBAAK3C,UAAU,aACX,yBAAKA,UAAU,0BACX,4BA3BD4D,OAAOC,KAAKrB,GAAeZ,KAAI,SAAAc,GAClC,IAAIoB,EAAoBtB,EAAcE,GACtC,OAAQ,wBACIX,IAAK+B,EACL9D,UAAWyC,EAAeqB,GAC1BtD,QAAS,kBAhDF,SAACkC,GACxBH,EAAUG,GAENR,GAAQE,IACR2B,QAAQC,IAAR,iCAAsCtB,IACtCC,KA2C2BsB,CAAmBH,KAEjCpB,QAwBb,yBAAK1C,UAAU,oBACX,2BAAOA,UAAU,YACbkE,SA/DS,SAACzD,GACtB0B,EAAQ1B,EAAEC,OAAOyD,QA+DLC,YAAY,oBACZC,QAASZ,IAEb,2BAAOzD,UAAU,gBACbkE,SA/Da,SAACzD,GAC1B4B,EAAY5B,EAAEC,OAAOyD,QA+DTC,YAAY,SACZC,QAASZ,EACTU,MAAO/B,GAAsB,MAGrC,yBAAKpC,UAAU,oBACX,4BAAQQ,QAASmC,GAAjB,c,6BC3BD2B,EA/EF,CACTC,OAAO,WAAD,4BAAE,WAAOrC,EAAME,EAAUE,GAAvB,iBAAAkC,EAAA,sEAEmBC,MAAM,sFAAD,OAAuFvC,EAAvF,qBAAwGE,EAAxG,oBAA4HE,GAAU,CAC9JoC,QAAS,CACLC,cAAc,UAAD,OARdC,uIAIH,cAEEC,EAFF,gBAOuBA,EAASC,OAPhC,YAOEC,EAPF,QAQapD,WARb,yCASOoD,EAAapD,WAAWC,KAAI,SAAA/B,GAC/B,MAAO,CACHE,GAAIF,EAASE,GACbG,SAAUL,EAASmF,UACnBnE,IAAKhB,EAASgB,IACdE,KAAMlB,EAASkB,KACfC,QAASnB,EAASuC,SAAS6C,SAC3BhE,KAAMpB,EAASuC,SAASnB,KACxBC,MAAOrB,EAASuC,SAASlB,MACzBC,QAAStB,EAASuC,SAAS8C,SAC3B9D,SAAUvB,EAASsF,WAAW,GAAKtF,EAASsF,WAAW,GAAGC,MAAQ,KAClE9D,OAAQzB,EAASyB,OACjBC,YAAa1B,EAASwF,aACtBhF,YAAaR,EAASQ,iBAtB9B,2CAAF,uDAAC,I,+BCGI,SAASiF,EAAT,GAAwD,IAAzC9E,EAAwC,EAAxCA,QAASmB,EAA+B,EAA/BA,WAAY4D,EAAmB,EAAnBA,gBAAmB,EACtCtD,oBAAS,GAD6B,mBAC7DuD,EAD6D,KACpDC,EADoD,OAElCxD,oBAAS,GAFyB,mBAE7DyD,EAF6D,KAElDC,EAFkD,OAG9C1D,qBAH8C,mBAG7DL,EAH6D,KAGxDgE,EAHwD,OAI5B3D,mBAAS,IAJmB,mBAI/C4D,GAJ+C,WAMhEC,EAAiBC,iBAAO,IAEtBC,EAAWC,cAGXC,EAAYC,uBAAY,YAiThC,SAAoBtF,GAClB,IAAMuF,EAAQC,OAAOvD,SAASwD,qBAAqB,UAAU,GAEvDC,EAASF,OAAOvD,SAASC,cAAc,UAE7CwD,EAAOtG,IAAMY,EAIbuF,EAAMI,WAAWC,aAAaF,EAAQH,GAzTpCM,CAAW,4DACXL,OAAOM,QAAUA,EACjBN,OAAOM,YACN,IAIGA,EAAU,WASdC,IAASC,YA/BGjC,6FAgCZ,IAAIhD,EAAM,IAAIgF,IAAStB,IAAI,CACzBwB,UAAW,MACXhF,MAAO,qCACPiF,OAAQ,EAAE,GAAI,MACdC,KAAM,IAGRpF,EAAIqF,GAAG,QAAQ,WACbrB,EAAOhE,GACPA,EAAIsF,aAKFC,EAAgBhB,uBAAY,WAChC,IAAIiB,EAAU,CACZC,KAAM,oBACNC,SAAU3F,EAAWC,KAAI,SAAA/B,GACvB,MAAO,CACLwH,KAAM,UACNE,SAAU,CACRF,KAAM,QACNhH,YAAa,CAACR,EAASQ,YAAYC,UAAWT,EAASQ,YAAYE,WAErEiH,WAAY,CACVpC,MAAOvF,EAASkB,KAChBC,QAASnB,EAASmB,QAClBC,KAAMpB,EAASoB,KACfG,SAAUvB,EAASuB,SACnBP,IAAKhB,EAASgB,IACdd,GAAIF,EAASE,SAmCf+F,EAAe2B,UAAY9F,IAC7BmE,EAAe2B,QAAQC,SAAQ,SAAAC,GAAM,OAAIA,EAAOC,YAChD9B,EAAe2B,QAAU,IAM7BL,EAAQE,SAASI,SAAQ,SAASC,GAGlC,IAAIE,EAAK/E,SAASC,cAAc,OAChC8E,EAAG7H,UAAY,SAKf,IAUqB8H,EAVjBC,EAAW,IAAInB,IAASoB,OAAOH,GACnCE,EAASE,UAAUN,EAAOJ,SAASlH,aAClC6H,SAAS,IAAItB,IAASuB,MAAM,CAAEC,OAAQ,KACtCC,QAAQ,OAASV,EAAOH,WAAWpC,MAAQ,WAAauC,EAAOH,WAAWvG,KAAO,OAAS0G,EAAOH,WAAWpG,SAAW,YAAcuG,EAAOH,WAAW3G,IAAM,0CAC7JyH,MAAM1G,GACPkE,EAAe2B,QAAQ5F,KAAKkG,GAC5BlC,EAAgB,CAACC,EAAe2B,UAIXK,EAOTH,EANR/F,EAAI2G,MAAM,CACRxB,OAAQe,EAAeP,SAASlH,YAChC2G,KAAM,KAaVa,EAAGW,iBAAiB,SAAS,SAAS/H,IAPtC,SAAmBqH,GACjBlG,EAAI2G,MAAM,CACRxB,OAAQe,EAAeP,SAASlH,YAChC2G,KAAM,KAKRyB,CAAUd,GAKV3B,EAAS,CAAEqB,KAAM,iBAAkBqB,QAASf,EAAOH,WAAWzH,QAKhE+F,EAAe2B,QAAQC,SAAQ,SAAAC,YAQhC,CAAChG,IAUJgH,qBAAU,WAPV,IAAmBb,EAQbnG,GAAc4D,IARDuC,EASL,CAACzH,YAAa,CAACkF,EAAgB,GAAIA,EAAgB,KAR/D3D,EAAI2G,MAAM,CACRxB,OAAQe,EAAezH,YACvB2G,KAAM,KASNlB,EAAe2B,QAAQC,SAAQ,SAAAC,GACzBA,EAAOiB,QAAQC,IAAIC,QAAQ,GAAOC,OAAOxD,EAAgB,IAAIuD,QAAQ,SAO5E,CAACvD,IAGJoD,qBAAU,WACRzC,MAEC,CAACA,IAGJyC,qBAAU,WAGRxB,MACC,CAACxF,IA6CJgH,qBAAU,WACR,IAAM/G,EAAMkB,SAASI,cAAc,iBACpBJ,SAASI,cAAc,cAC/BsF,iBAAiB,SAAS,WACL,UAAtB5G,EAAIE,MAAMkH,QACZpH,EAAIE,MAAMkH,QAAU,OAEpBpH,EAAIE,MAAMkH,QAAU,aAGvB,IAQH,IAAMC,EAAezD,EAAU,WAAa,WAE5C,OACE,yBAAKxF,UAAU,iBACd,yBAAKA,UAAU,oBACb,4BAAQA,UAAU,YAAYQ,QAhEnC,WAKOkF,GAEHC,GAAa,GAEfnF,IACAiF,GAAW,SAAAD,GAAO,OAAeA,KACjCjC,YAAW,WACT8C,OAAO6C,cAAc,IAAIC,MAAM,aAC9B,KAmDqDF,IAGtD,yBAAKlJ,GAAG,gBACN,yBAAKA,GAAG,U,MC5QD,SAASqJ,IACtB,OACE,yBAAKpJ,UAAU,UAAUqJ,MAAM,OAAOC,OAAO,OAAOC,QAAQ,YAAYC,MAAM,8BAC5E,4BAAQxJ,UAAU,OAAOyJ,KAAK,OAAOC,YAAY,IAAIC,cAAc,QAAQC,GAAG,KAAKC,GAAG,KAAKC,EAAE,QCMpF,SAASC,IAAO,IAAD,EACQ9H,mBAAS,IADjB,mBACrBN,EADqB,KACTqI,EADS,OAEM/H,oBAAS,GAFf,mBAErBgI,EAFqB,KAEVC,EAFU,OAGEjI,oBAAS,GAHX,mBAGrBuD,EAHqB,KAGZ2E,EAHY,OAIkBlI,qBAJlB,mBAIrBsD,EAJqB,KAIJ6E,EAJI,OAKUnI,oBAAS,GALnB,mBAKrBoI,EALqB,KAKRC,EALQ,KAOtBC,EAAcC,aAAY,SAAAtJ,GAAK,OAAIA,KA0BzCyH,qBAAU,WACJhH,GACFuI,GAAa,KAEd,CAACvI,EAAYuI,IA6BhB,IAsBMO,EAAa1E,mBAEnB4C,qBAAU,WACR,IAAI+B,EAAiB5H,SAAS6H,eAAeJ,EAAYK,eACrDF,IAEFA,EAAeG,UAAUC,IAAI,aAC7BJ,EAAeK,eAAe,CAACC,MAAO,QAASC,OAAQ,QAASC,SAAU,YAGxET,EAAWhD,SAAWgD,EAAWhD,UAAYiD,GAC/CD,EAAWhD,QAAQoD,UAAUjD,OAAO,aAEtC6C,EAAWhD,QAAUiD,IAItB,CAACH,EAAYK,gBAGdjC,qBAAU,WACRtC,OAAOmC,iBAAiB,UAAU,WAG9B,IAAI2C,EAAgB9E,OAAO+E,YAActI,SAASuI,gBAAgBC,YAC9DH,EAAgB,KAClBb,GAAe,GACXa,EAAgB,KACpBb,GAAe,QAIpB,CAACD,IAEJ,IAAMkB,EAAoB/F,IAAY6E,EAAc,CAAChB,MAAO,OAAS,CAACA,MAAO,QAI7E,OACE,yBAAKrJ,UAAU,OACb,wBAAIA,UAAU,kBACZ,uBAAGY,KAAK,IAAIZ,UAAU,OAAO8B,MAAO,CAAC0J,eAAgB,OAAQC,MAAO,UAClE,sCACA,yBAAKxL,IAAKyL,IAAMtL,IAAI,YAAYkJ,OAAO,WAG3C,kBAAC,EAAD,CAAW1G,WA5Hf,SAAoBV,EAAME,EAAUE,GAClC4H,GAAa,GAEb5F,EAAKC,OAAOrC,EAAME,EAAUE,GAAQqJ,MAAK,SAAAhK,GAGvC,GAFAqI,EAAc,KAETrI,GAAcA,EAAWiK,OAAS,EAAG,CACxC,IAAIC,EAAI/I,SAASC,cAAc,KAC3B+I,EAAYhJ,SAASI,cAAc,cACvC2I,EAAEzI,YAAc,6CAChByI,EAAE/J,MAAMuB,QAAU,wHAClByI,EAAUxI,OAAOuI,GAEjBtI,YAAW,WACTuI,EAAUtI,YAAYqI,KACrB,UAEH7B,EAAc,YAAIrI,UA4GpB,yBAAK3B,UAAU,YAAY8B,MAAO,CAACuH,MAAO,OAAQL,QAAS,OAAQ+C,eAAgB,SAAUC,UAAW,OAAQC,SAAU,cAM1H,yBAAKlM,GAAG,eAAeC,UAAU,UAC7B,kBAAC,EAAD,CAAKQ,QA5EoB,WAC/B2J,GAAW,SAAA3E,GAAO,OAAKA,MA2EuB7D,WAAYA,EAAY4D,gBAAiBA,KAGrF,yBAAKzD,MAAOyJ,EAAmBvL,UAAU,oBACtCiK,EACC,yBAAKjK,UAAU,UAGb,kBAAC,EAAD,CAAQ8B,MAAO,CAACkH,QAAS,OAAQkD,WAAW,SAAUH,eAAgB,aAExE,kBAAC,EAAD,CAAcpK,WAAYA,EAAY7B,gBA/EtB,SAACO,GACvB+J,EAAmB/J,QC1EH8L,QACW,cAA7B9F,OAAOjE,SAASgK,UAEe,UAA7B/F,OAAOjE,SAASgK,UAEhB/F,OAAOjE,SAASgK,SAASC,MACvB,2D,kBCPAC,EAAe,CACnBC,WAAY,UACZ3B,cAAe,mBAsBF4B,EANcC,aAZS,WAAmC,IAAlCvL,EAAiC,uDAAzBoL,EAAcI,EAAW,uCACtE,OAAOA,EAAOrF,MACZ,IAAK,mBACH,OAAO,2BAAInG,GAAX,IAAkBqL,WAAYG,EAAOhE,UACvC,IAAK,iBACH,OAAO,2BAAIxH,GAAX,IAAkB0J,cAAe8B,EAAOhE,UAC1C,QACE,OAAOxH,MChBbyL,IAASC,OACP,kBAAC,IAAD,CAAUC,MAAOL,GACf,kBAAC,EAAD,OAEF1J,SAAS6H,eAAe,SFuHpB,kBAAmBmC,WACrBA,UAAUC,cAAcC,MACrBrB,MAAK,SAAAsB,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLrJ,QAAQqJ,MAAMA,EAAMC,c","file":"static/js/main.dd2a7f54.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/kelp.062a796b.png\";","module.exports = __webpack_public_path__ + \"static/media/favicon.83942fdc.ico\";","import React from 'react';\nimport './Business.css';\nimport defaultImage from '../../favicon.ico';\n// import { useSelector, useDispatch } from \"react-redux\";\n// import setCurrentBiz from '../redux/store';\n\nexport default function Business({ business, clickOnBusiness, id }) {  \n  // const currentBiz = useSelector(state => state);\n  // const dispatch = useDispatch();\n  // const [clickedBiz, setClickedBiz] = useState();\n\n  const handleImageClick = (e) => {\n    // dispatch(setCurrentBiz(e))\n    // console.log(currentBiz, \"from Business Component!\")\n    clickOnBusiness(e.target.alt.split(','))\n    // console.log(e.target.alt, \"from Business Component!\")\n  }\n\n  // const prevBizDiv = useRef();\n\n  // useEffect(() => {\n  //   const selected = document.getElementById(id);\n  //   if (selected) {\n  //     selected.addEventListener('click', function() {\n  //       setClickedBiz(selected);\n  //       prevBizDiv.current = selected;\n  //       console.log(selected)\n  //       selected.classList.add(\"activeBiz\");\n  //       console.log(prevBizDiv.current)\n  //       if (prevBizDiv.current && prevBizDiv.current !== selected) {\n  //         prevBizDiv.current.classList.remove(\"activeBiz\");\n  //       }\n  //       prevBizDiv.current = \"\";\n  //     });\n  //   }\n\n  //   return\n  // }, [business])\n\n  const chooseImage = () => {\n    return business.imageSrc ? business.imageSrc : defaultImage;\n  } \n\n\n  return (\n      <div className=\"Business\" id={id}>\n        <div className=\"image-container\">\n          <img src={chooseImage()} alt={[business.coordinates.longitude, business.coordinates.latitude]} onClick={handleImageClick}/>\n        </div>\n        <a href={business.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"Business-name\"><h2>{business.name}</h2></a>\n        <div className=\"Business-information\">\n          <div className=\"Business-address\">\n            <a href={`https://www.google.com/maps/search/?api=1&query=${business.address}+${business.city}`} target=\"_blank\" rel=\"noopener noreferrer\"><p>{business.address}</p>\n            <p>{business.city}</p>\n            <p>{`${business.state} ${business.zipCode}`}</p></a>\n          </div>\n          <div className=\"Business-reviews\">\n            {business.category ? <h3>{business.category.toUpperCase()}</h3> : null}\n            <h3 className=\"rating\">{`${business.rating} stars`}</h3>\n            <p>{`${business.reviewCount} reviews`}</p>\n          </div>\n        </div>\n      </div>\n    )\n}\n\n\n\n\n// OLD CLASS BASED COMPONENT:\n\n// class Business extends React.Component {\n//     render() {\n//         return (\n//             <div className=\"Business\">\n//               <div className=\"image-container\">\n//                 <img src={this.props.business.imageSrc} alt={this.props.business.name}/>\n//               </div>\n//               <a href={this.props.business.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"Business-name\"><h2>{this.props.business.name}</h2></a>\n//               <div className=\"Business-information\">\n//                 <div className=\"Business-address\">\n//                   <a href={`https://www.google.com/maps/search/?api=1&query=${this.props.business.address}+${this.props.business.city}`} target=\"_blank\" rel=\"noopener noreferrer\"><p>{this.props.business.address}</p>\n//                   <p>{this.props.business.city}</p>\n//                   <p>{`${this.props.business.state} ${this.props.business.zipCode}`}</p></a>\n//                 </div>\n//                 <div className=\"Business-reviews\">\n//                   {this.props.business.category ? <h3>{this.props.business.category.toUpperCase()}</h3> : null}\n//                   <h3 className=\"rating\">{`${this.props.business.rating} stars`}</h3>\n//                   <p>{`${this.props.business.reviewCount} reviews`}</p>\n//                 </div>\n//               </div>\n//             </div>\n//         )\n//     }\n// };\n\n// export default Business;","import React from 'react';\nimport './BusinessList.css';\nimport Business from '../Business/Business';\n// import { useSelector } from 'react-redux';\n\nfunction BusinessList (props) {\n    // similar incoming prop that lets this component know which marker was clicked on the map. then reach in for it's id property and check it against whichever business was rendered in the businessList. then have a function to automatically scroll to that 'id' position and also to add and remove a class that highlights the business.\n    // const globalState = useSelector(state => state);\n    let loadedBusinesses = [];\n    props.businesses.map(business => loadedBusinesses.push(business))\n\n    return (\n        <div className=\"BusinessList\" style={props.style}>\n            {props.businesses.map(business => <Business business={business} className=\"biz\" id={business.id} key={business.id} clickOnBusiness={props.clickOnBusiness}/> )}\n        </div>\n    )\n}\n\n\n// OLD CLASS BASED COMPONENT:\n// class BusinessList extends React.Component {\n\n//     // componentDidMount() {\n//     //     console.log(\"BusinessList did mount\")\n//     // }\n\n//     render() {\n//         return (\n//             <div className=\"BusinessList\">\n//                 {this.props.businesses.map(business => <Business business={business} key={business.id}/> )}\n//             </div>\n//         );\n//     }\n// }\n\nexport default BusinessList;","import React, {useState} from \"react\";\nimport './SearchBar.css';\n\n// Auto location populator\n\n\nexport default function SearchBar(props) {\n    const [term, setTerm] = useState('');\n    const [location, setLocation] = useState('');\n    const [sortBy, setSortBy] = useState('best_match');\n\n    const sortByOptions = {\n        'Best Match': 'best_match',\n        'Highest Rated': 'rating',\n        'Most Reviewed': 'review_count'\n    }\n    \n    const getSortByClass = (sortByOption) => {\n        return sortBy === sortByOption ? 'active' : '';\n    };\n\n    const handleSortByChange = (sortByOption) => {\n        setSortBy(sortByOption);\n        // console.log(sortByOption);\n        if (term && location) {\n            console.log(`sort option changed to ${sortByOption}`);\n            handleSearch();\n            // makeshift bandaid fix to the \"needing to double click sorting options for it to load new results with different sorting option applied\"\n            // setTimeout(() => {\n            //     handleSearch();\n            // }, 0);\n        }\n    };\n\n    const handleTermChange = (e) => {\n        setTerm(e.target.value)\n        // Yelp.autoComplete(event.target.value, this.autoLocate().latitude, this.autoLocate().longitude);\n    };\n\n    const handleLocationChange = (e) => {\n        setLocation(e.target.value);\n    };\n\n    const handleSearch = () => {\n        // Form Validation Warning\n        if (!term || !location) {\n            let warningContainer = document.createElement('div');\n            let warning = document.createElement('p');\n            let belowSubmitButton = document.querySelector('.SearchBar-submit');\n            warningContainer.setAttribute('style', 'display: flex; justify-content: center; position: absolute; width: 100%; margin-top: 35px;')\n            warning.textContent = \"Must fill in all fields! 🧐\";\n            warning.style.cssText = \"color: white; background: red; width: 300px; padding: 7px; border-radius: 7px; opacity: 0.9; display: flex; justify-content: center; font-size: 1.1rem\";\n            warningContainer.append(warning);\n            belowSubmitButton.append(warningContainer);\n            setTimeout(() => {\n                belowSubmitButton.removeChild(warningContainer);\n            }, 5000);\n        } else {\n            props.searchYelp(term, location, sortBy);\n        }\n    }\n\n    const renderSortByOptions = () => {\n        // console.log(sortByOptions)\n        return Object.keys(sortByOptions).map(sortByOption => {\n            let sortByOptionValue = sortByOptions[sortByOption];\n            return (<li \n                        key={sortByOptionValue} \n                        className={getSortByClass(sortByOptionValue)} \n                        onClick={() => handleSortByChange(sortByOptionValue)}\n                    >\n                        {sortByOption}\n                    </li>)\n        })\n        // return Object.keys(this.sortByOptions).map(sortByOption => {\n    //         let sortByOptionValue = this.sortByOptions[sortByOption];\n    //         return <li key={sortByOptionValue} className={this.getSortByClass(sortByOptionValue)} onClick={this.handleSortByChange.bind(this, sortByOptionValue)}>{sortByOption}</li>\n    //     });\n    }\n\n    const enterSearch = (e) => {\n        e.preventDefault();\n        if (e.keyCode === 13) {\n            handleSearch();\n        }\n    }\n\n\n    return (\n        <div className=\"SearchBar\">\n            <div className=\"SearchBar-sort-options\">\n                <ul>\n                    {renderSortByOptions()}\n                </ul>\n            </div>\n            <div className=\"SearchBar-fields\">\n                <input className=\"termInput\" \n                    onChange={handleTermChange} \n                    placeholder=\"Search Businesses\"\n                    onKeyUp={enterSearch}\n                />\n                <input className=\"locationInput\" \n                    onChange={handleLocationChange} \n                    placeholder=\"Where?\" \n                    onKeyUp={enterSearch} \n                    value={location ? location : ''}\n                />\n            </div>\n            <div className=\"SearchBar-submit\" >\n                <button onClick={handleSearch}>Let's Go</button>\n            </div>\n        </div>\n    ) \n}\n\n\n\n\n\n\n\n\n\n// OLD CLASS BASED COMPONENT:\n\n// class SearchBar extends React.Component {\n    // constructor(props) {\n    //     super(props);\n    //     this.state = {term: '', location: '', sortBy: 'best_match'};\n    //     this.sortByOptions = {\n    //         'Best Match': 'best_match',\n    //         'Highest Rated': 'rating',\n    //         'Most Reviewed': 'review_count'\n    //     };\n    //     this.handleTermChange = this.handleTermChange.bind(this);\n    //     this.handleLocationChange = this.handleLocationChange.bind(this);\n    //     this.handleSortByChange = this.handleSortByChange.bind(this);\n    //     this.handleSearch = this.handleSearch.bind(this);\n    //     this.enterSearch = this.enterSearch.bind(this);\n    // };\n    \n    // getSortByClass(sortByOption) {              /* This returns CSS class for providing visual feedback to users */\n    //     return this.state.sortBy === sortByOption ? 'active' : '';\n    // };\n\n    // handleSortByChange(sortByOption, event) {          /* This sets the state of a sorting option for communicating with Yelp API */\n    //     this.setState({sortBy: sortByOption});\n    //     console.log(sortByOption)\n    //     if (this.state.term && this.state.location) {\n    //         console.log(`sort option changed to ${sortByOption}`)\n    //         this.handleSearch();\n    //         // ghetto bandaid fix to the \"needing to double click sorting options for it to load new results with different sorting option applied\"\n    //         setTimeout(() => {\n    //             this.handleSearch();\n    //         }, 0);\n    //     }\n    // };\n\n    // handleTermChange(event) {\n    //     this.setState({term: event.target.value});\n    //     // Yelp.autoComplete(event.target.value, this.autoLocate().latitude, this.autoLocate().longitude);\n    // };\n\n    // handleLocationChange(event) {\n\n    //     this.setState({location: event.target.value});\n    // };\n\n    // // componentDidMount() {\n    // //     const coors = navigator.geolocation.getCurrentPosition(function(position) {\n    // //         // console.log(position)\n    // //         console.log(position.coords.latitude + ', ' + position.coords.longitude)\n    // //         return position.coords.latitude + ', ' + position.coords.longitude\n    // //     })\n    // //     console.log(this.state.location)\n    // //     console.log(coors)\n    // //     this.setState({location: coors})\n    // // }\n\n    // handleSearch(event) {\n\n    //     // loading animation take 1:\n    //     // let loading = document.querySelector('.SearchBar-submit');\n    //     // let p = document.createElement('p');\n    //     // p.textContent = \"LOADING...\";\n    //     // p.style.cssText = \"position: absolute; top: 67%; left: 50%; margin-left: -40px; margin-top: -50px; z-index: -1;\"\n    //     // loading.append(p);\n\n    //     if (!this.state.term || !this.state.location) {\n    //         let headsupContainer = document.createElement('div');\n    //         let headsup = document.createElement('p');\n    //         let belowSubmitButton = document.querySelector('.SearchBar-submit');\n    //         headsupContainer.setAttribute('style', 'display: flex; justify-content: center; position: absolute; width: 100%; margin-top: 35px;')\n    //         headsup.textContent = \"Must fill in all fields! 🧐\";\n    //         headsup.style.cssText = \"color: white; background: red; width: 300px; padding: 7px; border-radius: 7px; opacity: 0.9; display: flex; justify-content: center; font-size: 1.1rem\";\n    //         headsupContainer.append(headsup)\n    //         belowSubmitButton.append(headsupContainer);\n    //         setTimeout(() => {\n    //             belowSubmitButton.removeChild(headsupContainer);\n    //         }, 5000);\n    //     } else {\n    //         this.props.searchYelp(this.state.term, this.state.location, this.state.sortBy);\n    //     }\n    //     // document.querySelector('.termInput').value = \"\"\n    //     // document.querySelector('.locationInput').value = \"\"\n    //     // event.preventDefault();\n    // };\n\n    // renderSortByOptions() {\n    //     return Object.keys(this.sortByOptions).map(sortByOption => {\n    //         let sortByOptionValue = this.sortByOptions[sortByOption];\n    //         return <li key={sortByOptionValue} className={this.getSortByClass(sortByOptionValue)} onClick={this.handleSortByChange.bind(this, sortByOptionValue)}>{sortByOption}</li>\n    //     });\n    // };\n\n    // enterSearch(event) {\n    //     if (event.keyCode === 13) {\n    //         this.handleSearch();\n    //         event.preventDefault();\n    //     }\n    // };\n\n    // render() {\n\n        // let locationInput = document.querySelector('.locationInput');\n        // if (this.state.location) {\n        //     console.log(locationInput.value)\n        // }\n        // if (this.state.location) {\n        //     console.log(this.state.location)\n        // }\n\n        // return (\n        //     <div className=\"SearchBar\">\n        //         <div className=\"SearchBar-sort-options\">\n        //             <ul>\n        //                 {this.renderSortByOptions()}\n        //             </ul>\n        //         </div>\n        //         <div className=\"SearchBar-fields\">\n        //             <input className=\"termInput\" onChange={this.handleTermChange} placeholder=\"Search Businesses\" onKeyUp={this.enterSearch}/>\n        //             <input className=\"locationInput\" onChange={this.handleLocationChange} placeholder=\"Where?\" onKeyUp={this.enterSearch} value={this.state.location ? this.state.location : ''}/>\n        //         </div>\n        //         <div className=\"SearchBar-submit\" >\n        //             <button onClick={this.handleSearch}>Let's Go</button>\n        //         </div>\n        //     </div>\n        // )\n    // }\n// }\n\n// export default SearchBar;","const apiKey = process.env.REACT_APP_YELP_APIKEY;\n\n/* https://www.yelp.com/developers/documentation/v3/business_search */\nconst Yelp = {\n    search: async (term, location, sortBy) => {\n            /* to bypass the CORS restriction, use CORS Anywhere */\n        const response = await fetch(`https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=${term}&location=${location}&sort_by=${sortBy}`, {\n            headers: {\n                Authorization: `Bearer ${apiKey}`\n            }\n        })\n        const jsonResponse = await response.json()\n        if (jsonResponse.businesses) {\n            return jsonResponse.businesses.map(business => {    \n                return {\n                    id: business.id,                            \n                    imageSrc: business.image_url,\n                    url: business.url,\n                    name: business.name,\n                    address: business.location.address1,\n                    city: business.location.city,\n                    state: business.location.state,\n                    zipCode: business.location.zip_code,\n                    category: business.categories[0] ? business.categories[0].title : null,\n                    rating: business.rating,\n                    reviewCount: business.review_count,\n                    coordinates: business.coordinates\n                }\n            });\n        }\n    }\n};\n\n\n\n\n\n// const Yelp = {\n//     search(term, location, sortBy) {\n//             /* to bypass the CORS restriction, use CORS Anywhere */\n//         return fetch(`https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=${term}&location=${location}&sort_by=${sortBy}`, {\n//             headers: {\n//                 Authorization: `Bearer ${apiKey}`\n//             }\n//         }).then(response => {\n//             return response.json()\n//         }).then(jsonResponse => {\n//             if (jsonResponse.businesses) {\n//                 // console.log(jsonResponse.businesses)\n//                 return jsonResponse.businesses.map(business => {    \n//                     return {\n//                         id: business.id,                            /* https://www.yelp.com/developers/documentation/v3/business_search */\n//                         imageSrc: business.image_url,\n//                         url: business.url,\n//                         name: business.name,\n//                         address: business.location.address1,\n//                         city: business.location.city,\n//                         state: business.location.state,\n//                         zipCode: business.location.zip_code,\n//                         category: business.categories[0].title,\n//                         rating: business.rating,\n//                         reviewCount: business.review_count\n//                     }\n//                 }); \n//             }\n//         });\n//     },   \n\n//     // autoComplete(text, latitude, longitude) {\n//     //     return fetch(`https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/autocomplete?text=${text}&latitude=${latitude}&longitude=${longitude}`, {\n//     //         headers: {\n//     //             Authorization: `Bearer ${apiKey}`\n//     //         }\n//     //     }).then(response => {\n//     //         return response.json();\n//     //     }).then(jsonResponse => {\n//     //         console.log(jsonResponse) \n//     //     })\n//     // }\n// };\n\n\nexport default Yelp;\n\n\n\n\n/* Example would be: (OG taken from App.js) */\n// const business = {\n//   imageSrc: 'https://s3.amazonaws.com/codecademy-content/programs/react/ravenous/pizza.jpg',\n//   name: 'MarginOtto Pizzeria',\n//   address: '1010 Paddington Way',\n//   city: 'Flavortown',\n//   state: 'NY',\n//   zipCode: '10101',\n//   category: 'Italian',\n//   rating: 4.5,\n//   reviewCount: 90\n// };\n\n// const businesses = [\n//   business,\n//   business,\n//   business,\n//   business,\n//   business,\n//   business\n// ];","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport './Map.css';\nimport { useDispatch} from 'react-redux';\nconst API_KEY = process.env.REACT_APP_MAPBOXGL_ACCESSTOKEN;\n// import currentBusinessStore from '../redux/store';\n\nexport default function Map({ onClick, businesses, clickedBusiness }) {\n  const [mapOpen, setMapView] = useState(false);\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const [map, setMap] = useState();\n  const [stateMarkers, setStateMarkers] = useState([]);\n  // const businessId = useRef();\n  let currentMarkers = useRef([]);\n\n  const dispatch = useDispatch();\n  // const globalState = useSelector(state => state);\n\n  const renderMap = useCallback(() => {\n    loadScript(\"https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js\");\n    window.initMap = initMap;\n    window.initMap();\n  }, []);\n  \n  // https://docs.mapbox.com/help/tutorials/building-a-store-locator/#make-the-map-interactive\n  \n  const initMap = () => {\n    // var map = new window.google.maps.Map(document.getElementById('map'), {\n    //   center: {lat: -33.8688, lng: 151.2195},\n    //   zoom: 13\n    // });\n    \n    // console.log('initMap running')\n    // console.log(businesses.map(business => Number(business.coordinates.longitude.toFixed(3))))\n    // console.log(businesses.map(business => business))\n    mapboxgl.accessToken = API_KEY;\n    var map = new mapboxgl.Map({\n      container: 'map',\n      style: 'mapbox://styles/mapbox/streets-v11',\n      center: [-96, 37.8],\n      zoom: 3\n    });\n\n    map.on(\"load\", () => {\n      setMap(map);\n      map.resize();\n    })\n  }\n\n\n  const updateMarkers = useCallback(() => {\n    var geojson = {\n      type: 'FeatureCollection',\n      features: businesses.map(business => {\n        return {\n          type: 'Feature',\n          geometry: {\n            type: 'Point',\n            coordinates: [business.coordinates.longitude, business.coordinates.latitude]\n          },\n          properties: {\n            title: business.name,\n            address: business.address,\n            city: business.city,\n            category: business.category,\n            url: business.url,\n            id: business.id\n          }\n        }\n      })\n      \n      // [{\n      //   type: 'Feature',\n      //   geometry: {\n      //     type: 'Point',\n      //     coordinates: [-77.032, 38.913]\n      //   },\n      //   properties: {\n      //     title: 'Mapbox',\n      //     description: 'Washington, D.C.'\n      //   }\n      // },\n      // {\n      //   type: 'Feature',\n      //   geometry: {\n      //     type: 'Point',\n      //     coordinates: [-122.414, 37.776]\n      //   },\n      //   properties: {\n      //     title: 'Mapbox',\n      //     description: 'San Francisco, California',\n      //     haircut: 'bald'\n      //   }\n      // }]\n    };\n    // console.log(geojson);\n    \n\n\n    // remove previous markers\n    // setTimeout(() => {\n      if (currentMarkers.current !== businesses) {\n        currentMarkers.current.forEach(marker => marker.remove());\n        currentMarkers.current = [];\n        // console.log(\"remove existing markers!\", currentMarkers)\n      }\n    // }, 2000);\n  \n    // add markers to map\n    geojson.features.forEach(function(marker) {\n    \n    // create a HTML element for each feature\n    var el = document.createElement('div');\n    el.className = 'marker';\n    \n\n\n    // make a marker for each feature and add to the map\n    let myMarker = new mapboxgl.Marker(el);\n    myMarker.setLngLat(marker.geometry.coordinates)\n    .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups\n    .setHTML('<h3>' + marker.properties.title + '</h3><p>' + marker.properties.city + '</p>' + marker.properties.category + '<a href=\"' + marker.properties.url + '\" target=\"_blank\"><p>Yelp Page</p><a>'))\n    .addTo(map);\n    currentMarkers.current.push(myMarker);\n    setStateMarkers([currentMarkers.current]);\n    // console.log(\"currentMarkers!\", currentMarkers);\n\n\n      function flyToArea(currentFeature) {\n        map.flyTo({\n          center: currentFeature.geometry.coordinates,\n          zoom: 10\n        });\n      }\n\n      flyToArea(marker);\n\n      function flyToSpot(currentFeature) {\n        map.flyTo({\n          center: currentFeature.geometry.coordinates,\n          zoom: 14\n        });\n      }\n      \n      el.addEventListener('click', function(e) {\n        flyToSpot(marker);\n        // businessId.current = marker.properties.id;\n        // console.log(marker.properties.address);\n        // console.log(\"ClickedBusiness: \", clickedBusiness)\n        // console.log(currentMarkers.current[2]._lngLat.lng.toFixed(4));\n        dispatch({ type: \"MARKER_CLICKED\", payload: marker.properties.id })\n        // console.log(globalState);\n        // console.log(\"clicked\", marker)\n      })\n\n      currentMarkers.current.forEach(marker => {\n        // if (marker._lngLat.lng.toFixed(4) === clickedBusiness) {\n        if (clickedBusiness) {\n          // flyToSpot(marker);\n          // console.log(\"clicked\", marker)\n        }\n      })\n    });\n  }, [businesses]);\n\n\n  function flyToSpot(currentFeature) {\n    map.flyTo({\n      center: currentFeature.coordinates,\n      zoom: 14\n    });\n  }\n\n  useEffect(() => {\n    if (businesses && clickedBusiness) {\n      flyToSpot({coordinates: [clickedBusiness[0], clickedBusiness[1]]})\n      // console.log(currentMarkers.current[2]._lngLat.lng.toFixed(4));\n      \n      currentMarkers.current.forEach(marker => {\n        if (marker._lngLat.lng.toFixed(4) === Number(clickedBusiness[0]).toFixed(4)) {\n          // marker.openPopup(marker);\n          // console.log(marker._lngLat.lng.toFixed(4), \"marker\");\n          // console.log(Number(clickedBusiness[0]).toFixed(4), \"business\");\n        }\n      });\n    }\n  } ,[clickedBusiness])\n\n\n  useEffect(() => {\n    renderMap();\n    // console.log(\"first rendermap() launched\")\n  }, [renderMap])\n\n\n  useEffect(() => {\n    // console.log(\"businesses Array\", businesses)\n    // removeMarkers();\n    updateMarkers();\n  }, [businesses])\n\n\n\n  function handleClick() {\n\n    // console.log(clickedBusiness);\n    // console.log(currentMarkers.current);\n    // console.log(stateMarkers);\n    if (!mapLoaded) {\n      // renderMap();\n      setMapLoaded(true);\n    }\n    onClick();\n    setMapView(mapOpen => mapOpen = !mapOpen)\n    setTimeout(() => {\n      window.dispatchEvent(new Event('resize'))\n    }, 0)\n  }\n\n  // // Map box sticky scroll attempt 1: \n  // useEffect(() => {\n  //   // window.onload = function() {\n  //     window.onscroll = function() {stickyMap()};\n\n  //     // Get the header\n  //     var myMap = document.getElementById(\"mapContainer\");\n  //     // let myMap = document.querySelector('.mapComponent');\n\n  //     // Get the offset position of the navbar\n  //     let sticky = myMap.offsetTop;\n\n  //     // Add the sticky class to the header when you reach its scroll position. Remove \"sticky\" when you leave the scroll position\n  //     function stickyMap() {\n  //       if (window.pageYOffset > sticky) {\n  //         myMap.classList.add(\"sticky\");\n  //         console.log(\"yoyoyo!\")\n  //       } else {\n  //         myMap.classList.remove(\"sticky\");\n  //         console.log(\"up top!\")\n  //       }\n  //     }\n  //   // }\n  // }, [])\n\n  useEffect(() => {\n    const map = document.querySelector('#mapContainer');\n    const button = document.querySelector('.mapButton');\n    button.addEventListener('click', function() {\n      if (map.style.display === \"block\") {\n        map.style.display = \"none\";\n      } else {\n        map.style.display = \"block\";\n      }\n    })\n  }, [])\n\n\n  // const toggleMap = mapOpen ? {visibility: \"visible\", width: \"45%\", display: \"block\"} : {visibility: \"hidden\", width: \"0%\", display: \"none\"};\n  // const BusinessListWidth = this.state.mapOpen ? {width: \"45%\"} : {width: \"100%\"};\n  // const toggleMap = this.state.mapOpen ? {display: \"block\"} : {display: \"none\"};\n  // const toggleMap = this.state.mapOpen ? \"mapViewOn\" : \"mapViewOff\";\n  // document.querySelector('#map').classList.toggle('mapViewOn');\n  const buttonStatus = mapOpen ? \"Hide Map\" : \"Show Map\";\n\n  return (\n    <div className=\"mapBackground\">\n     <div className=\"mapButtContainer\">\n       <button className=\"mapButton\" onClick={handleClick}>{buttonStatus}</button>\n     </div>\n\n      <div id=\"mapContainer\">\n        <div id='map'></div>\n      </div>\n\n\n\n      {/* OLD GOOGLE MAPS JSX/HTML */}\n      {/* <div ref={el => this.mapContainer = el} style={mapOpen} className=\"mapContainer\" /> */}\n        \n\n        {/* <section style={mapView}>\n          <div className=\"pac-card\" id=\"pac-card\">\n            <div>\n              <div id=\"title\">\n                Autocomplete search\n              </div>\n              <div id=\"type-selector\" className=\"pac-controls\">\n                <input type=\"radio\" name=\"type\" id=\"changetype-all\" checked=\"checked\" />\n                <label htmlFor=\"changetype-all\">All</label>\n\n                <input type=\"radio\" name=\"type\" id=\"changetype-establishment\" />\n                <label htmlFor=\"changetype-establishment\">Establishments</label>\n\n                <input type=\"radio\" name=\"type\" id=\"changetype-address\" />\n                <label htmlFor=\"changetype-address\">Addresses</label>\n\n                <input type=\"radio\" name=\"type\" id=\"changetype-geocode\" />\n                <label htmlFor=\"changetype-geocode\">Geocodes</label>\n              </div>\n              <div id=\"strict-bounds-selector\" className=\"pac-controls\">\n                <input type=\"checkbox\" id=\"use-strict-bounds\" value=\"\" />\n                <label htmlFor=\"use-strict-bounds\">Strict Bounds</label>\n              </div>\n            </div>\n            <div id=\"pac-container\">\n              <input id=\"pac-input\" type=\"text\"\n                  placeholder=\"Enter a location\" />\n            </div>\n          </div>\n\n          <div id=\"map\"></div>\n          <div id=\"infowindow-content\">\n            <img src=\"\" width=\"16\" height=\"16\" id=\"place-icon\" />\n            <span id=\"place-name\"  className=\"title\"></span><br></br>\n            <span id=\"place-address\"></span>\n          </div>\n        </section> */}\n    </div>\n  )\n}\n\n\n// Loads the MapBox API script\nfunction loadScript(url) {\n  const index = window.document.getElementsByTagName(\"script\")[0];\n  // const head = window.document.getElementsByTagName('head')[0];\n  const script = window.document.createElement('script');\n  // script.type = \"text/javascript\"\n  script.src = url;\n  // script.async = true;\n  // script.defer = true;\n  // head.append(script);\n  index.parentNode.insertBefore(script, index);\n  // console.log('loadScript script loaded')\n};","import React from 'react';\nimport './Loader.css';\n\nexport default function Loader() {\n  return (\n    <svg className=\"spinner\" width=\"65px\" height=\"65px\" viewBox=\"0 0 66 66\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle className=\"path\" fill=\"none\" strokeWidth=\"6\" strokeLinecap=\"round\" cx=\"33\" cy=\"33\" r=\"30\"></circle>\n    </svg>\n  )\n};\n","import React, {useState, useEffect, useRef} from 'react';\nimport kelp from '../../kelp.png';\nimport './reset.css'\nimport './App.css';\nimport BusinessList from '../BusinessList/BusinessList';\nimport SearchBar from '../SearchBar/SearchBar';\nimport Yelp from '../../util/Yelp'\nimport Map from '../Map/Map';\nimport Loader from '../Loader/Loader';\nimport { useSelector } from 'react-redux';\n\n\nexport default function App() {\n  const [businesses, setBusinesses] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [mapOpen, setMapOpen] = useState(false);\n  const [clickedBusiness, setClickedBusiness] = useState();\n  const [windowSmall, setWindowSmall] = useState(false);\n  \n  const globalState = useSelector(state => state);\n  \n\n  function searchYelp(term, location, sortBy) {\n    setIsLoading(true);\n\n    Yelp.search(term, location, sortBy).then(businesses => {\n      setBusinesses([]);\n\n      if (!businesses || businesses.length < 1) {\n        let p = document.createElement('p');\n        let noresults = document.querySelector('.noresults');\n        p.textContent = \"No results found! 😱😢\";\n        p.style.cssText = \"color: white; background: red; padding: 10px; border-radius: 4px; text-align: center; width: 300px; font-size: 1.3rem\";\n        noresults.append(p);\n        // console.log(\"NOTHING FOUND!\");\n        setTimeout(() => {\n          noresults.removeChild(p);\n        }, 5000);\n      } else {\n        setBusinesses([...businesses]);\n      }\n    });\n      // console.log(`Searching Yelp with ${term}, ${location}, ${sortBy}`)\n  };\n\n  useEffect(() => {\n    if (businesses) {\n      setIsLoading(false);\n    }\n  }, [businesses, setIsLoading])\n\n\n  // Map box sticky scroll attempt 1: \n  // useEffect(() => {\n  //   // window.onload = function() {\n  //     window.onscroll = function() {stickyMap()};\n  \n  //     // Get the header\n  //     // var myMap = document.getElementById(\"mapComponent\");\n  //     let myMap = document.querySelector('.scrollThis');\n  \n  //     // Get the offset position of the navbar\n  //     let sticky = myMap.offsetTop;\n  \n  //     // Add the sticky class to the header when you reach its scroll position. Remove \"sticky\" when you leave the scroll position\n  //     function stickyMap() {\n  //       if (window.pageYOffset > sticky) {\n  //         myMap.classList.add(\"sticky\");\n  //         console.log(\"yoyoyo!\")\n  //       } else {\n  //         myMap.classList.remove(\"sticky\");\n  //         console.log(\"up top!\")\n  //       }\n  //     }\n  //   // }\n  // }, [])\n\n\n  const toggleSearchResultsWidth = () => {\n    setMapOpen(mapOpen => !mapOpen);\n    // console.log(mapOpen);\n  }\n\n  // const [bizId, setBizId] = useState();\n\n  const clickOnBusiness = (coordinates) => {\n    setClickedBusiness(coordinates);\n  }\n\n\n  \n  // const usePrevious = (value) => {\n  //   const ref = useRef();\n  //   useEffect(() => {\n  //     ref.current = value;\n  //   });\n  //   return ref.current;\n  // }\n\n  \n  const prevBizDiv = useRef();\n  \n  useEffect(() => {\n    let bizToHighlight = document.getElementById(globalState.currentMarker)\n    if (bizToHighlight) {\n      // console.log(bizToHighlight)\n      bizToHighlight.classList.add(\"activeBiz\");\n      bizToHighlight.scrollIntoView({block: 'start', inline: 'start', behavior: \"smooth\"});\n      // console.log(prevBizDiv.current)\n    }\n    if (prevBizDiv.current && prevBizDiv.current !== bizToHighlight) {\n      prevBizDiv.current.classList.remove(\"activeBiz\");\n    }\n    prevBizDiv.current = bizToHighlight;\n    // if (currentBizDiv.current !== bizToHighlight) {\n    //   currentBizDiv.current.classList.toggle(\"active\");\n    // }\n}, [globalState.currentMarker])\n\n\n  useEffect(() => {\n    window.addEventListener('resize', function() {\n        // console.log(window.innerWidth);\n        // console.log(document.documentElement.clientWidth)\n        let viewPortWidth = window.innerWidth || document.documentElement.clientWidth;\n        if (viewPortWidth < 900) {\n          setWindowSmall(true)\n        } if (viewPortWidth > 900){\n          setWindowSmall(false);\n        }\n        // console.log(windowSmall);\n    })\n  }, [windowSmall])\n\n  const BusinessListWidth = mapOpen && !windowSmall ? {width: \"50%\"} : {width: \"100%\"};\n\n  // const mapOpenStyle = mapOpen ? {visibility: \"visible\", width: \"45%\"} : {visibility: \"hidden\", width: \"0%\", display: \"none\"};\n\n  return (\n    <div className=\"App\">\n      <h1 className=\"logo-container\">\n        <a href=\"/\" className=\"logo\" style={{textDecoration: 'none', color: \"white\"}}>\n          <span>kelp</span>\n          <img src={kelp} alt=\"kelp logo\" height=\"30px\"/>\n        </a>\n      </h1>\n      <SearchBar searchYelp={searchYelp}/>\n      <div className=\"noresults\" style={{width: '100%', display: 'flex', justifyContent: 'center', marginTop: '30px', position: 'absolute'}}></div>\n      {/* <div className=\"mapButtContainer\">\n        <button className=\"mapButton\" onClick={this.handleClick}>{buttonStatus}</button>\n      </div> */}\n\n\n      <div id=\"mapComponent\" className=\"sticky\">\n          <Map onClick={toggleSearchResultsWidth} businesses={businesses} clickedBusiness={clickedBusiness}/>\n      </div>\n      \n      <div style={BusinessListWidth} className=\"BizListContainer\">\n        {isLoading ? \n          <div className=\"loader\">\n            {/* <img src=\"https://miro.medium.com/max/700/1*CsJ05WEGfunYMLGfsT2sXA.gif\" alt=\"icon\" />\n            <p>LOADING...</p> */}\n            <Loader style={{display: 'flex', alignItems:\"center\", justifyContent: \"center\"}}/>\n          </div>\n        : <BusinessList businesses={businesses} clickOnBusiness={clickOnBusiness}\n          />\n        }\n      </div>\n\n\n\n\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// OLD CLASS BASED COMPONENT:\n\n// class App extends React.Component {\n  // constructor(props){\n  //   super(props);\n  //   this.state = {\n  //     businesses: [],\n  //     isLoading: '',\n  //     mapOpen: false,\n  //     // mapLoaded: false\n  //   }\n  //   this.searchYelp = this.searchYelp.bind(this);\n  //   // this.handleClick = this.handleClick.bind(this);\n  // };\n\n\n  // searchYelp(term, location, sortBy) {\n  //   this.setState({isLoading: true})\n\n  //   Yelp.search(term, location, sortBy).then(businesses => {\n  //     this.setState({businesses: []})\n\n  //     if (!businesses || businesses.length < 1) {\n  //       let p = document.createElement('p');\n  //       let noresults = document.querySelector('.noresults');\n  //       p.textContent = \"No results found! 😱😢\";\n  //       p.style.cssText = \"color: white; background: red; padding: 20px; border-radius: 4px; text-align: center; width: 300px; font-size: 1.3rem\";\n  //       noresults.append(p);\n  //       console.log(\"NOTHING FOUND!\");\n  //       setTimeout(() => {\n  //         noresults.removeChild(p);\n  //       }, 5000);\n  //     } else {\n  //       this.setState({businesses: businesses});\n  //     }\n  //   });\n  //     // console.log(`Searching Yelp with ${term}, ${location}, ${sortBy}`)\n  // };\n\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   if (prevState.isLoading) {\n  //     this.setState({isLoading: false})\n  //   }\n  // }\n\n  /* GOOGLE MAP // LIFESAVER video: https://www.youtube.com/watch?v=W5LhLZqj76s (initMap is not a function error: because the script needs to look at the 'window' level. so at window.document.body.. etc. window.initMap = this.initMap)*/\n\n  // renderMap = () => {\n  //   loadScript(\"https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js\");\n  //   window.initMap = this.initMap;\n  //   window.initMap();\n  // };\n\n  // initMap = () => {\n  //   // var map = new window.google.maps.Map(document.getElementById('map'), {\n  //   //   center: {lat: -33.8688, lng: 151.2195},\n  //   //   zoom: 13\n  //   // });\n    \n  //   console.log('initMap running')\n  //   mapboxgl.accessToken = 'pk.eyJ1Ijoic3Rhbi1kZXYiLCJhIjoiY2tlYm9leWpjMGFpMjJ0cndybWdpbmVwMSJ9.I0CXw1DFG7WYKgyVm7x07A';\n  //   var map = new mapboxgl.Map({\n  //     container: 'map',\n  //     style: 'mapbox://styles/mapbox/streets-v11',\n  //     center: [-96, 37.8],\n  //     zoom: 3\n  //   });\n\n  //   var geojson = {\n  //     type: 'FeatureCollection',\n  //     features: [{\n  //       type: 'Feature',\n  //       geometry: {\n  //         type: 'Point',\n  //         coordinates: [-77.032, 38.913]\n  //       },\n  //       properties: {\n  //         title: 'Mapbox',\n  //         description: 'Washington, D.C.'\n  //       }\n  //     },\n  //     {\n  //       type: 'Feature',\n  //       geometry: {\n  //         type: 'Point',\n  //         coordinates: [-122.414, 37.776]\n  //       },\n  //       properties: {\n  //         title: 'Mapbox',\n  //         description: 'San Francisco, California',\n  //         haircut: 'bald'\n  //       }\n  //     }]\n  //   };\n    \n  //   // add markers to map\n  //   geojson.features.forEach(function(marker) {\n    \n  //   // create a HTML element for each feature\n  //   var el = document.createElement('div');\n  //   el.className = 'marker';\n    \n  //   // make a marker for each feature and add to the map\n  //   new mapboxgl.Marker(el)\n  //     .setLngLat(marker.geometry.coordinates)\n  //     new mapboxgl.Marker(el)\n  //     .setLngLat(marker.geometry.coordinates)\n  //     .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups\n  //     .setHTML('<h3>' + marker.properties.title + '</h3><p>' + marker.properties.description + '</p>' + marker.properties.haircut))\n  //     .addTo(map);\n  //     console.log(marker.properties)\n  //   });\n  // }\n\n\n  // toggleSearchResultsWidth = () => {\n  //   this.setState({mapOpen: !this.state.mapOpen});\n  //   console.log(this.state.mapOpen);\n  // }\n\n\n  // render() {\n    \n  //   const mapOpen = this.state.mapOpen ? {visibility: \"visible\", width: \"45%\"} : {visibility: \"hidden\", width: \"0%\", display: \"none\"};\n  //   const BusinessListWidth = this.state.mapOpen ? {width: \"45%\"} : {width: \"100%\"};\n  //   // const mapOpen = this.state.mapOpen ? {display: \"block\"} : {display: \"none\"};\n  //   // const mapOpen = this.state.mapOpen ? \"mapViewOn\" : \"mapViewOff\";\n  //   // document.querySelector('#map').classList.toggle('mapViewOn');\n  //   // const buttonStatus = this.state.mapOpen ? \"Grid View\" : \"Map View\";\n\n  //   return (\n  //     <div className=\"App\">\n  //       <h1 className=\"logo-container\">\n  //         <a href=\"/\" className=\"logo\" style={{textDecoration: 'none', color: \"white\"}}>\n  //           <span>kelp</span>\n  //           <img src={kelp} alt=\"kelp logo\" height=\"35px\"/>\n  //         </a>\n  //       </h1>\n  //       <SearchBar searchYelp={this.searchYelp}/>\n  //       <div className=\"noresults\" style={{width: '100%', display: 'flex', justifyContent: 'center', marginTop: '30px', position: 'absolute'}}></div>\n  //       {/* <div className=\"mapButtContainer\">\n  //         <button className=\"mapButton\" onClick={this.handleClick}>{buttonStatus}</button>\n  //       </div> */}\n        \n  //       <div className=\"bizAndMap\">\n  //         {this.state.isLoading ? \n  //           <div className=\"loader\">\n  //             <img src=\"https://miro.medium.com/max/700/1*CsJ05WEGfunYMLGfsT2sXA.gif\" alt=\"icon\" />\n  //             <p>LOADING...</p>\n  //             </div>\n  //           : <BusinessList style={BusinessListWidth} businesses={this.state.businesses}\n  //           />\n  //         }\n  //         <Map onClick={this.toggleSearchResultsWidth} style={mapOpen}/>\n  //         {/* <div id='map' style={mapOpen}></div> */}\n  //       </div>\n\n  //     </div>\n  //   );\n  // }\n// }\n\n// export default App;\n\n// https://www.codecademy.com/paths/build-web-apps-with-react/tracks/bwa-ajax-requests-and-api-interactions/modules/bwa-ravenous-part-four/projects/interacting-with-yelp-api ","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import {createStore} from \"redux\";\n\n// export Action Creator\nexport const setCurrentBiz = (e) => {\n  return {\n    type: \"BUSINESS_CLICKED\",\n    payload: e.target.alt\n  }\n}\n\n\nconst defaultState = {\n  currentBiz: \"bananas\",\n  currentMarker: \"default marker!\"\n}\n\n// export Reducer\nexport const currentBusinessReducer = (state = defaultState, action) => {\n  switch(action.type) {\n    case \"BUSINESS_CLICKED\":\n      return {...state, currentBiz: action.payload}\n    case \"MARKER_CLICKED\":\n      return {...state, currentMarker: action.payload}\n    default:\n      return state\n  }\n}\n\n// Redux Store\nconst currentBusinessStore = createStore(currentBusinessReducer);\n\n// Subscribe Function\n// currentBusinessStore.subscribe(() => console.log(currentBusinessStore.getState()))\n\n// Export the store\nexport default currentBusinessStore;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport currentBusinessStore from '../src/components/redux/store';\n\nReactDOM.render(\n  <Provider store={currentBusinessStore}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}