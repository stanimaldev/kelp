(this["webpackJsonpreact-ravenous"]=this["webpackJsonpreact-ravenous"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/kelp.062a796b.png"},,function(e,t,a){e.exports=a(24)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(9),i=a.n(r),o=(a(17),a(2)),c=a(3),l=a(1),u=a(5),p=a(4),h=a(10),m=a.n(h),d=(a(18),a(19),a(20),a(21),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"Business"},s.a.createElement("div",{className:"image-container"},s.a.createElement("a",{href:this.props.business.url,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:this.props.business.imageSrc,alt:""}))),s.a.createElement("h2",null,this.props.business.name),s.a.createElement("div",{className:"Business-information"},s.a.createElement("div",{className:"Business-address"},s.a.createElement("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(this.props.business.address,"+").concat(this.props.business.city),target:"_blank",rel:"noopener noreferrer"},s.a.createElement("p",null,this.props.business.address),s.a.createElement("p",null,this.props.business.city),s.a.createElement("p",null,"".concat(this.props.business.state," ").concat(this.props.business.zipCode)))),s.a.createElement("div",{className:"Business-reviews"},s.a.createElement("h3",null,this.props.business.category.toUpperCase()),s.a.createElement("h3",{className:"rating"},"".concat(this.props.business.rating," stars")),s.a.createElement("p",null,"".concat(this.props.business.reviewCount," reviews")))))}}]),a}(s.a.Component));var b=function(e){return s.a.createElement("div",{className:"BusinessList"},e.businesses.map((function(e){return s.a.createElement(d,{business:e,key:e.id})})))},g=(a(22),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={term:"",location:"",sortBy:"best_match"},n.sortByOptions={"Best Match":"best_match","Highest Rated":"rating","Most Reviewed":"review_count"},n.handleTermChange=n.handleTermChange.bind(Object(l.a)(n)),n.handleLocationChange=n.handleLocationChange.bind(Object(l.a)(n)),n.handleSortByChange=n.handleSortByChange.bind(Object(l.a)(n)),n.handleSearch=n.handleSearch.bind(Object(l.a)(n)),n.enterSearch=n.enterSearch.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"getSortByClass",value:function(e){return this.state.sortBy===e?"active":""}},{key:"handleSortByChange",value:function(e,t){this.setState({sortBy:e}),console.log(e),this.state.term&&this.state.location&&(console.log("sort option changed to ".concat(e)),this.handleSearch())}},{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"handleLocationChange",value:function(e){this.setState({location:e.target.value})}},{key:"handleSearch",value:function(e){if(this.state.term&&this.state.location)this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy);else{var t=document.createElement("div"),a=document.createElement("p"),n=document.querySelector(".SearchBar-submit");t.setAttribute("style","display: flex; justify-content: center; position: absolute; width: 100%; margin-top: 35px;"),a.textContent="Must fill in all fields! \ud83e\uddd0",a.style.cssText="color: white; background: red; width: 300px; padding: 7px; border-radius: 7px; opacity: 0.9; display: flex; justify-content: center; font-size: 1.1rem",t.append(a),n.append(t),setTimeout((function(){n.removeChild(t)}),5e3)}}},{key:"renderSortByOptions",value:function(){var e=this;return Object.keys(this.sortByOptions).map((function(t){var a=e.sortByOptions[t];return s.a.createElement("li",{key:a,className:e.getSortByClass(a),onClick:e.handleSortByChange.bind(e,a)},t)}))}},{key:"enterSearch",value:function(e){13===e.keyCode&&(this.handleSearch(),e.preventDefault())}},{key:"render",value:function(){return s.a.createElement("div",{className:"SearchBar"},s.a.createElement("div",{className:"SearchBar-sort-options"},s.a.createElement("ul",null,this.renderSortByOptions())),s.a.createElement("div",{className:"SearchBar-fields"},s.a.createElement("input",{className:"termInput",onChange:this.handleTermChange,placeholder:"Search Businesses",onKeyUp:this.enterSearch}),s.a.createElement("input",{className:"locationInput",onChange:this.handleLocationChange,placeholder:"Where?",onKeyUp:this.enterSearch,value:this.state.location?this.state.location:""})),s.a.createElement("div",{className:"SearchBar-submit"},s.a.createElement("button",{onClick:this.handleSearch},"Let's Go")))}}]),a}(s.a.Component)),f=a(7),v=a.n(f),y=a(11),E={search:function(){var e=Object(y.a)(v.a.mark((function e(t,a,n){var s,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(t,"&location=").concat(a,"&sort_by=").concat(n),{headers:{Authorization:"Bearer ".concat("pNUUtdTjrkfUQQ6oulCCXktMcftn4rR1VUc2uKWt0uxxqOeoHUUvzS_CorL4NtLvK_TDzR7xYaNYy7W8umfbNPPKdHexEmhvZs9mZl1blmePnovnY9AT2CirAR_tXnYx")}});case 2:return s=e.sent,e.next=5,s.json();case 5:if(!(r=e.sent).businesses){e.next=8;break}return e.abrupt("return",r.businesses.map((function(e){return{id:e.id,imageSrc:e.image_url,url:e.url,name:e.name,address:e.location.address1,city:e.location.city,state:e.location.state,zipCode:e.location.zip_code,category:e.categories[0].title,rating:e.rating,reviewCount:e.review_count}})));case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},w=a(6),k=a.n(w);var C=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).renderMap=function(){!function(e){var t=window.document.getElementsByTagName("script")[0],a=window.document.createElement("script");a.src=e,t.parentNode.insertBefore(a,t),console.log("script loaded")}("https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"),window.initMap=n.initMap,window.initMap()},n.initMap=function(){console.log("initMap running"),k.a.accessToken="pk.eyJ1Ijoic3Rhbi1kZXYiLCJhIjoiY2tlYm9leWpjMGFpMjJ0cndybWdpbmVwMSJ9.I0CXw1DFG7WYKgyVm7x07A";var e=new k.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-96,37.8],zoom:3});[{type:"Feature",geometry:{type:"Point",coordinates:[-77.032,38.913]},properties:{title:"Mapbox",description:"Washington, D.C."}},{type:"Feature",geometry:{type:"Point",coordinates:[-122.414,37.776]},properties:{title:"Mapbox",description:"San Francisco, California",haircut:"bald"}}].forEach((function(t){var a=document.createElement("div");a.className="marker",new k.a.Marker(a).setLngLat(t.geometry.coordinates),new k.a.Marker(a).setLngLat(t.geometry.coordinates).setPopup(new k.a.Popup({offset:25}).setHTML("<h3>"+t.properties.title+"</h3><p>"+t.properties.description+"</p>"+t.properties.haircut)).addTo(e),console.log(t.properties)}))},n.state={businesses:[],isLoading:"",mapView:!1},n.searchYelp=n.searchYelp.bind(Object(l.a)(n)),n.handleClick=n.handleClick.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"searchYelp",value:function(e,t,a){var n=this;this.setState({isLoading:!0}),E.search(e,t,a).then((function(e){if(n.setState({businesses:[]}),!e||e.length<1){var t=document.createElement("p"),a=document.querySelector(".noresults");t.textContent="No results found! \ud83d\ude31\ud83d\ude22",t.style.cssText="color: white; background: red; padding: 20px; border-radius: 4px; text-align: center; width: 300px; font-size: 1.3rem",a.append(t),console.log("NOTHING FOUND!"),setTimeout((function(){a.removeChild(t)}),5e3)}else n.setState({businesses:e})}))}},{key:"componentDidUpdate",value:function(e,t){t.isLoading&&this.setState({isLoading:!1})}},{key:"handleClick",value:function(){this.setState({mapView:!this.state.mapView})}},{key:"componentDidMount",value:function(){this.renderMap()}},{key:"render",value:function(){var e=this.state.mapView?{visibility:"visible"}:{visibility:"hidden"},t=this.state.mapView?"Grid View":"Map View";return s.a.createElement("div",{className:"App"},s.a.createElement("h1",{className:"logo-container"},s.a.createElement("a",{href:"/",className:"logo",style:{textDecoration:"none",color:"white"}},s.a.createElement("span",null,"kelp"),s.a.createElement("img",{src:m.a,alt:"kelp logo",height:"35px"}))),s.a.createElement(g,{searchYelp:this.searchYelp}),s.a.createElement("div",{className:"noresults",style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"30px",position:"absolute"}}),s.a.createElement("div",{className:"mapButtContainer"},s.a.createElement("button",{className:"mapButton",onClick:this.handleClick},t)),this.state.isLoading?s.a.createElement("div",{className:"loader"},s.a.createElement("img",{src:"https://miro.medium.com/max/700/1*CsJ05WEGfunYMLGfsT2sXA.gif",alt:"icon"}),s.a.createElement("p",null)):s.a.createElement(b,{businesses:this.state.businesses}),s.a.createElement("div",{id:"map",style:e}))}}]),a}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[12,1,2]]]);
//# sourceMappingURL=main.e6a2da54.chunk.js.map